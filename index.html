<html>

<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
   
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col">
                <div class="accordion" id='lista-atleti-maschi'>

                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
        crossorigin="anonymous"></script>
</body>
<script>
    const atletiMaschi = [{"nome":"GIULIONI CRISTIANO","dataNascita":"03/08/1983","sex":"M","posizione":"4968","storico":["4968","4914","4886","4952","4947","5224","5114","5258","5131","4965"],"variazione":"-"},{"nome":"PAUCCHI FABIO","dataNascita":"20/02/1965","sex":"M","posizione":"4106","storico":["4106","4348","4375","4345","4312","4436","4509","4550","",""],"variazione":"+"},{"nome":"SCHIAROLI ALESSANDRO","dataNascita":"16/09/1969","sex":"M","posizione":"5201","storico":["5201","5141","5113","5104","5103","5125","5148","5142","4884","4714"],"variazione":"-"}];
    const atletiFemmine = [{"nome":"CONTI ANGELA","dataNascita":"14/10/1963","sex":"F","posizione":"373","storico":["373","361","362","359","353","348","341","333","334","319"],"variazione":"-"},{"nome":"PAUCCHI MARTINA","dataNascita":"29/08/1999","sex":"F","posizione":"236","storico":["236","254","253","247","240","234","223","219","213",""],"variazione":"+"}];
    
    const accordionItemTemplate = `
            <div class="accordion-item">
                      <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseOne-##IndiceAtleta" aria-expanded="true" aria-controls="panelsStayOpen-collapseOne">
                          <div class="row w-100">  

                            <div class="col-1">                                
                                ##VariazioneAtleta</div>
                            <div class="col">##NomeAtleta</div>
                            <div class="col-1">##PosizioneAtleta</div>
                         </div>
                        </button>
                      </h2>
                      <div id="panelsStayOpen-collapseOne-##IndiceAtleta" class="accordion-collapse collapse">
                        <div class="accordion-body">
                          ##StoricoAlteta
                        </div>
                      </div>
                    </div>
    `;

    function listaAtleti(atleti) {
        const root = document.getElementById("lista-atleti-maschi");
        for (let i = 0; i < atleti.length; i++) {
            const atleta = atleti[i];

            let atletaTemplate = accordionItemTemplate.replaceAll('##NomeAtleta', atleta.nome);
            atletaTemplate = atletaTemplate.replaceAll('##IndiceAtleta', i);           
            atletaTemplate = atletaTemplate.replaceAll('##PosizioneAtleta', atleta.posizione);
            atletaTemplate = atletaTemplate.replaceAll('##StoricoAlteta', atleta.storico.join(' - '));

            if (atleta.variazione === '+'){
                atletaTemplate = atletaTemplate.replaceAll('##VariazioneAtleta', `<i class="fa fa-caret-up fa-lg" style='color:green' aria-hidden="true"></i>`);
            }
            if (atleta.variazione === '-'){
                atletaTemplate = atletaTemplate.replaceAll('##VariazioneAtleta', `<i class="fa fa-caret-down fa-lg" style='color:red' aria-hidden="true"></i>`);
            }
            if (atleta.variazione === '='){
                atletaTemplate = atletaTemplate.replaceAll('##VariazioneAtleta', ` <i class="fa fa-caret-left fa-lg" style='color:gray' aria-hidden="true"></i> <i class="fa fa-caret-right fa-lg" style='color:gray' aria-hidden="true"></i>`);
            }
            root.innerHTML += atletaTemplate;
           
        }
    }

    document.addEventListener('DOMContentLoaded', function () {
        const root = document.getElementById("lista-atleti-maschi");
        listaAtleti(atletiMaschi);
    }, false);
</script>

</html>